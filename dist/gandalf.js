(function(){(function(t){return t.fn.extend({gandalf:function(n){var l,a,r,i;if(a={attribute:"validators",validators:{required:function(){return function(n,l){var a;return a=t.trim(n).length>0?null:"This field is required.",l(a)}},length:function(n){return null==n&&(n=1),function(l,a){var r;return r=t.trim(l).length>=n?null:"Must be at least "+n+" character"+(n>1?"s":"")+" long.",a(r)}},email:function(t){return null==t&&(t=/^\S+@\S+\.\S+$/),function(n,l){var a;return a=t.test(n)?null:"Invalid email.",l(a)}}}},n=t.extend(!0,{},a,n),null==n.callback||"function"!=typeof n.callback)throw"gandalf.js expects a callback";return 0===this.length?(n.callback([]),this):(r=[],l=0,i=0,this.each(function(){var l,a,r,u,e,c;for(a=(null!=(e=t(this).data(n.attribute))?e.split(" "):void 0)||[],c=[],r=0,u=a.length;u>r;r++)l=a[r],l&&c.push(i++);return c}),this.each(function(){var a,u,e,c,o,s,h,f,d,v,g,p,b,m,k;for(a=t(this),f=(null!=(b=a.data(n.attribute))?b.split(" "):void 0)||[],h=[],d=0,g=f.length;g>d;d++)if(s=f[d]){if(e=s.match(/([\w\-\_]+)\[(.*)\]/),c=e[1],null==n.validators[c])throw"gandalf.js couldn't find any validators with name '"+c+"'";o=e[2].length&&(null!=(m=e[2])?m.split(","):void 0)||[],h.push(n.validators[c].apply(a,o))}for(k=[],v=0,p=h.length;p>v;v++)u=h[v],k.push(u(a.val(),function(t){return l++,r.push({input:a,error:t}),l===i?n.callback(r):void 0}));return k}))}})})(jQuery)}).call(this);